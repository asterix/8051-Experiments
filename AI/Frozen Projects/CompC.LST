A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE     1


MACRO ASSEMBLER A51 V8.01
OBJECT MODULE PLACED IN CompC.OBJ
ASSEMBLER INVOKED BY: D:\Program Files\Keil\C51\BIN\A51.EXE CompC.asm SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

                       1     ;ASTER 01/03/2009 1545
                       2     ;TO BE ASSEMBLED IN KEIL MICROVISION V3.60
                       3     ;ARTIFICIAL INTELLIGENCE
                       4     ;MICROCOMPUTER C
                       5     
                       6     ;CODE BASE COMPLETED : 02/03/2009 2120
                       7     
                       8     ;REV 3 LAST UPDATED 28/04/2009 1445
                       9     ;REV 4 LAST UPDATED 18/06/2009 1722
                      10     ;CODE CLOSED 21/06/2009 2213 ::: WORKING TESTED ::: PERFECT
                      11     
                      12     ;------------------------------------------------------------------------------------------
                             -----------------
                      13     ;SET THE ASSEMBLER FOR AT89S52
                      14     $nomod51 
                      15     ;$include (AT89X52.h)
                +1    16     
                +1    17     
                +1    18     
                +1    19     
                +1    20     
                +1    21     
                +1    22     
                +1    23     
                +1    24     
                +1    25     
                +1    26     
                +1    27     
                +1    28     
                +1    29     
  0080          +1    30     sfr P0      = 0x80;
  0081          +1    31     sfr SP      = 0x81;
  0082          +1    32     sfr DPL     = 0x82;
  0083          +1    33     sfr DPH     = 0x83;
  0087          +1    34     sfr PCON    = 0x87;
  0088          +1    35     sfr TCON    = 0x88;
  0089          +1    36     sfr TMOD    = 0x89;
  008A          +1    37     sfr TL0     = 0x8A;
  008B          +1    38     sfr TL1     = 0x8B;
  008C          +1    39     sfr TH0     = 0x8C;
  008D          +1    40     sfr TH1     = 0x8D;
  0090          +1    41     sfr P1      = 0x90;
  0098          +1    42     sfr SCON    = 0x98;
  0099          +1    43     sfr SBUF    = 0x99;
  00A0          +1    44     sfr P2      = 0xA0;
  00A8          +1    45     sfr IE      = 0xA8;
  00B0          +1    46     sfr P3      = 0xB0;
  00B8          +1    47     sfr IP      = 0xB8;
  00C8          +1    48     sfr T2CON   = 0xC8;
  00C9          +1    49     sfr T2MOD   = 0xC9;
  00CA          +1    50     sfr RCAP2L  = 0xCA;
  00CB          +1    51     sfr RCAP2H  = 0xCB;
  00CC          +1    52     sfr TL2     = 0xCC;
  00CD          +1    53     sfr TH2     = 0xCD;
  00D0          +1    54     sfr PSW     = 0xD0;
  00E0          +1    55     sfr ACC     = 0xE0;
  00F0          +1    56     sfr B       = 0xF0;
                +1    57     
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE     2

                +1    58     
                +1    59     
                +1    60     
  0080          +1    61     sbit P0_0 = 0x80;
  0081          +1    62     sbit P0_1 = 0x81;
  0082          +1    63     sbit P0_2 = 0x82;
  0083          +1    64     sbit P0_3 = 0x83;
  0084          +1    65     sbit P0_4 = 0x84;
  0085          +1    66     sbit P0_5 = 0x85;
  0086          +1    67     sbit P0_6 = 0x86;
  0087          +1    68     sbit P0_7 = 0x87;
                +1    69     
                +1    70     
                +1    71     
                +1    72     
                +1    73     
                +1    74     
                +1    75     
                +1    76     
                +1    77     
                +1    78     
                +1    79     
                +1    80     
                +1    81     
                +1    82     
                +1    83     
                +1    84     
  0088          +1    85     sbit IT0  = 0x88;
  0089          +1    86     sbit IE0  = 0x89;
  008A          +1    87     sbit IT1  = 0x8A;
  008B          +1    88     sbit IE1  = 0x8B;
  008C          +1    89     sbit TR0  = 0x8C;
  008D          +1    90     sbit TF0  = 0x8D;
  008E          +1    91     sbit TR1  = 0x8E;
  008F          +1    92     sbit TF1  = 0x8F;
                +1    93     
                +1    94     
                +1    95     
                +1    96     
                +1    97     
                +1    98     
                +1    99     
                +1   100     
                +1   101     
                +1   102     
                +1   103     
                +1   104     
                +1   105     
                +1   106     
                +1   107     
                +1   108     
                +1   109     
                +1   110     
                +1   111     
  0090          +1   112     sbit P1_0 = 0x90;
  0091          +1   113     sbit P1_1 = 0x91;
  0092          +1   114     sbit P1_2 = 0x92;
  0093          +1   115     sbit P1_3 = 0x93;
  0094          +1   116     sbit P1_4 = 0x94;
  0095          +1   117     sbit P1_5 = 0x95;
  0096          +1   118     sbit P1_6 = 0x96;
  0097          +1   119     sbit P1_7 = 0x97;
                +1   120     
  0090          +1   121     sbit T2   = 0x90;       /* External input to Timer/Counter 2, clock out */
  0091          +1   122     sbit T2EX = 0x91;       /* Timer/Counter 2 capture/reload trigger & dir ctl */
                +1   123     
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE     3

                +1   124     
                +1   125     
                +1   126     
  0098          +1   127     sbit RI   = 0x98;
  0099          +1   128     sbit TI   = 0x99;
  009A          +1   129     sbit RB8  = 0x9A;
  009B          +1   130     sbit TB8  = 0x9B;
  009C          +1   131     sbit REN  = 0x9C;
  009D          +1   132     sbit SM2  = 0x9D;
  009E          +1   133     sbit SM1  = 0x9E;
  009F          +1   134     sbit SM0  = 0x9F;
                +1   135     
                +1   136     
                +1   137     
                +1   138     
  00A0          +1   139     sbit P2_0 = 0xA0;
  00A1          +1   140     sbit P2_1 = 0xA1;
  00A2          +1   141     sbit P2_2 = 0xA2;
  00A3          +1   142     sbit P2_3 = 0xA3;
  00A4          +1   143     sbit P2_4 = 0xA4;
  00A5          +1   144     sbit P2_5 = 0xA5;
  00A6          +1   145     sbit P2_6 = 0xA6;
  00A7          +1   146     sbit P2_7 = 0xA7;
                +1   147     
                +1   148     
                +1   149     
                +1   150     
  00A8          +1   151     sbit EX0  = 0xA8;       /* 1=Enable External interrupt 0 */
  00A9          +1   152     sbit ET0  = 0xA9;       /* 1=Enable Timer 0 interrupt */
  00AA          +1   153     sbit EX1  = 0xAA;       /* 1=Enable External interrupt 1 */
  00AB          +1   154     sbit ET1  = 0xAB;       /* 1=Enable Timer 1 interrupt */
  00AC          +1   155     sbit ES   = 0xAC;       /* 1=Enable Serial port interrupt */
  00AD          +1   156     sbit ET2  = 0xAD;       /* 1=Enable Timer 2 interrupt */
                +1   157     
  00AF          +1   158     sbit EA   = 0xAF;       /* 0=Disable all interrupts */
                +1   159     
                +1   160     
                +1   161     
                +1   162     
  00B0          +1   163     sbit P3_0 = 0xB0;
  00B1          +1   164     sbit P3_1 = 0xB1;
  00B2          +1   165     sbit P3_2 = 0xB2;
  00B3          +1   166     sbit P3_3 = 0xB3;
  00B4          +1   167     sbit P3_4 = 0xB4;
  00B5          +1   168     sbit P3_5 = 0xB5;
  00B6          +1   169     sbit P3_6 = 0xB6;
  00B7          +1   170     sbit P3_7 = 0xB7;
                +1   171     
  00B0          +1   172     sbit RXD  = 0xB0;       /* Serial data input */
  00B1          +1   173     sbit TXD  = 0xB1;       /* Serial data output */
  00B2          +1   174     sbit INT0 = 0xB2;       /* External interrupt 0 */
  00B3          +1   175     sbit INT1 = 0xB3;       /* External interrupt 1 */
  00B4          +1   176     sbit T0   = 0xB4;       /* Timer 0 external input */
  00B5          +1   177     sbit T1   = 0xB5;       /* Timer 1 external input */
  00B6          +1   178     sbit WR   = 0xB6;       /* External data memory write strobe */
  00B7          +1   179     sbit RD   = 0xB7;       /* External data memory read strobe */
                +1   180     
                +1   181     
                +1   182     
                +1   183     
  00B8          +1   184     sbit PX0  = 0xB8;
  00B9          +1   185     sbit PT0  = 0xB9;
  00BA          +1   186     sbit PX1  = 0xBA;
  00BB          +1   187     sbit PT1  = 0xBB;
  00BC          +1   188     sbit PS   = 0xBC;
  00BD          +1   189     sbit PT2  = 0xBD;
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE     4

                +1   190     
                +1   191     
                +1   192     
                +1   193     
  00C8          +1   194     sbit CP_RL2= 0xC8;      /* 0=Reload, 1=Capture select */
  00C9          +1   195     sbit C_T2 = 0xC9;       /* 0=Timer, 1=Counter */
  00CA          +1   196     sbit TR2  = 0xCA;       /* 0=Stop timer, 1=Start timer */
  00CB          +1   197     sbit EXEN2= 0xCB;       /* Timer 2 external enable */
  00CC          +1   198     sbit TCLK = 0xCC;       /* 0=Serial clock uses Timer 1 overflow, 1=Timer 2 */
  00CD          +1   199     sbit RCLK = 0xCD;       /* 0=Serial clock uses Timer 1 overflow, 1=Timer 2 */
  00CE          +1   200     sbit EXF2 = 0xCE;       /* Timer 2 external flag */
  00CF          +1   201     sbit TF2  = 0xCF;       /* Timer 2 overflow flag */
                +1   202     
                +1   203     
                +1   204     
                +1   205     
                +1   206     
                +1   207     
                +1   208     
                +1   209     
                +1   210     
                +1   211     
  00D0          +1   212     sbit P    = 0xD0;
  00D1          +1   213     sbit F1   = 0xD1;
  00D2          +1   214     sbit OV   = 0xD2;
  00D3          +1   215     sbit RS0  = 0xD3;
  00D4          +1   216     sbit RS1  = 0xD4;
  00D5          +1   217     sbit F0   = 0xD5;
  00D6          +1   218     sbit AC   = 0xD6;
  00D7          +1   219     sbit CY   = 0xD7;
                +1   220     
                +1   221     
                +1   222     
                +1   223     
                +1   224     
                +1   225     
                +1   226     
                +1   227     
                +1   228     
                +1   229     
                +1   230     
                +1   231     
                +1   232     
                +1   233     
                +1   234     
                +1   235     
                +1   236     
                     237     
                     238     
                     239     ;DEFINITIONS
  0087               240     SBIT RS=P0^7
  0086               241     SBIT RW=P0^6
  0085               242     SBIT EN=P0^5
  0097               243     SBIT SYSBUSY=P1^7
                     244     ;------------------------------------------------------------------------------------------
                             -----------------
                     245     
0000                 246     ORG 0000H
                     247     
0000 802E            248     RESET:          SJMP 0030H 
                     249     
0030                 250     ORG 0030H
                     251     
0030 00              252     START:          NOP
0031 758110          253                             MOV SP,#10H                                     ;RELOCATE STACK OVE
                             R 10H 
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE     5

                     254     
0034 7438            255     INIT:           MOV A,#38H                                      ;INITIALIZATION OF HD44780(
                             LCD CONTROLLER)
0036 12010F          256                             LCALL COMMAND
0039 740C            257                             MOV A,#0CH
003B 12010F          258                             LCALL COMMAND
                     259                             
003E 7438            260                             MOV A,#38H                                      ;REINITIALIZATION O
                             F HD44780 FOR CAPACITIVE CORRECTION
0040 12010F          261                             LCALL COMMAND
0043 740C            262                             MOV A,#0CH
0045 12010F          263                             LCALL COMMAND
0048 7406            264                             MOV A,#06H
004A 12010F          265                             LCALL COMMAND
004D 7401            266                             MOV A,#01H      
004F 12010F          267                             LCALL COMMAND
                     268     
0052 901A00          269                             MOV DPTR,#MSG1                          ;DISPLAY SOMETHING
0055 12014D          270                             LCALL WRITEALL
                     271     
0058 E4              272                             CLR A                                           ;PORTS'  INIT
0059 74FF            273                             MOV A,#0FFH
005B F5B0            274                             MOV P3,A
005D 7580FF          275                             MOV P0,#0FFH
0060 F590            276                             MOV P1,A
0062 D297            277                             SETB P1.7                                       ;PULL UP BUSY FLAG
                     278     
0064 7820            279                             MOV R0,#20H                                     ;CLEAR RAM FROM 20H
                              TO 7FH
0066 E4              280                             CLR A
0067 F6              281     CLE:            MOV @R0,A
0068 08              282                             INC R0
0069 B87FFB          283                             CJNE R0,#7FH,CLE
                     284     
                     285                             
006C 75C830          286                             MOV T2CON,#30H                          ;SERIAL BAUD GENERATOR INIT
                              9600BPS TWI
006F 75CBFF          287                             MOV RCAP2H,#0FFH
0072 75CADC          288                             MOV RCAP2L,#0DCH
0075 53877F          289                             ANL PCON,#7FH
0078 759858          290                             MOV SCON,#58H
                     291     
                     292                             
007B 758801          293                             MOV TCON,#01H
007E 75A891          294                             MOV IE,#91H                                     ;INTERRUPTS ENABLE 
                             : INT0, SERIAL
0081 75B810          295                             MOV IP,#10H
                     296                             
0084 D2CA            297                             SETB TR2                                        ;START BAUD TIMER
                     298     
0086 D2D3            299                             SETB PSW.3                                      ;SERIAL RX BUFFER F
                             ROM 40H TO 4FH
0088 7840            300                             MOV R0,#40H
008A C2D3            301                             CLR PSW.3
                     302     
                     303     
008C 742E            304                             MOV A,#2EH
008E 12011E          305                             LCALL DISPLAY                           ;DOT 1                  
0091 121026          306                             LCALL DELAYD
                     307                             
0094 7461            308     COMLOAD:        MOV A,#61H
0096 7861            309                             MOV R0,#61H
0098 F6              310     RPTA:           MOV @R0,A
0099 08              311                             INC R0
009A 04              312                             INC A
009B B480FA          313                             CJNE A,#80H,RPTA
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE     6

                     314                             
009E 742E            315                             MOV A,#2EH                              
00A0 12011E          316                             LCALL DISPLAY                           ;DOT 2
00A3 121026          317                             LCALL DELAYD                            
00A6 12011E          318                             LCALL DISPLAY                           ;DOT 3
00A9 121026          319                             LCALL DELAYD
00AC 12011E          320                             LCALL DISPLAY                           ;DOT 4
00AF 121026          321                             LCALL DELAYD
                     322     
                     323                             
                     324                             
00B2 12013E          325                             LCALL CLEARH                            ;CLEAR THE LCD AND HOME CUR
                             SOR
00B5 783F            326                             MOV R0,#3FH
                     327     
                     328     ;------------------------------------------------------------------------------------------
                             --------
                     329     ;******************************************************************************************
                             ********
                     330     ;PROGRAM MAIN
                     331     ;MAIN BEGINS HERE
                     332     
00B7 7401            333     MAIN:           MOV A,#01H
00B9 12010F          334                             LCALL COMMAND
00BC 901A44          335                             MOV DPTR,#MSG4
00BF 120159          336                             LCALL LCDWRITE
00C2 00              337                             NOP
00C3 207937          338     NEXTS:          JB 79H,POWERDWN                         ;JUMP TO POWERDOWN IF 79H IS SET
00C6 08              339                             INC R0
00C7 E6              340                             MOV A,@R0
00C8 B85002          341                             CJNE R0,#50H,CONTI
00CB 7840            342                             MOV R0,#40H
00CD 60F4            343     CONTI:          JZ NEXTS
                     344     
00CF 7600            345                             MOV @R0,#00H                            ;CLEAR THE READ SPACE
                     346     
00D1 B46100          347                             CJNE A,#61H,VERFLL
00D4 4023            348     VERFLL:         JC EXITF
00D6 B48000          349                             CJNE A,#80H,VERFLU
00D9 501E            350     VERFLU:         JNC EXITF
                     351     
00DB 901A65          352                             MOV DPTR,#MSG5
00DE C3              353                             CLR C
00DF 9461            354                             SUBB A,#61H
00E1 75F021          355                             MOV B,#33
00E4 A4              356                             MUL AB
00E5 2582            357                             ADD A,DPL
00E7 F582            358                             MOV DPL,A
00E9 E5F0            359                             MOV A,B
00EB 3583            360                             ADDC A,DPH
00ED F583            361                             MOV DPH,A
                     362     
00EF E4              363                             CLR A                                           
00F0 120159          364                             LCALL LCDWRITE                          ;'LCDWRITE' MODIFIES CONTEN
                             TS OF R2,BANK0
00F3 121033          365                             LCALL DELAYL                            ;DISPLAY CURRENT OPERATION 
                             INFORMATION
                     366     
00F6 3097FD          367     CHBUSY:         JNB SYSBUSY,CHBUSY                      ;WAIT FOR MICRO B TO FINISH CURRENT
                              OPERATION
                     368     
                     369     
00F9 00              370     EXITF:          NOP
                     371     
                     372                                                                                     
00FA 0200B7          373     MAIN_END:       LJMP MAIN                                       ;LOOP THE MAIN
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE     7

                     374     
                     375     ;PROGRAM MAIN ENDS HERE
                     376     ;******************************************************************************************
                     377     ;------------------------------------------------------------------------------------------
                     378     ;POWER DOWN IN CASE OF BATTERY BROWN OUT
00FD 00              379     POWERDWN:       NOP
00FE C2AF            380                             CLR IE.7                                ;DISABLE ALL INTERRUPTS
0100 12013E          381                             LCALL CLEARH
0103 901D7D          382                             MOV DPTR,#MSG29
0106 12014D          383                             LCALL WRITEALL
0109 758702          384                             MOV PCON,#02H                   ;PUT MC INTO POWERDOWN MODE
010C 00              385                             NOP
010D 80FE            386     HALTDC:         SJMP HALTDC
                     387     
                     388     ;LCD ROUTINES
                     389     
010F 12012D          390     COMMAND:        LCALL READY
0112 C286            391                             CLR RW
0114 C287            392                             CLR RS
0116 F5A0            393                             MOV P2,A
0118 D285            394                             SETB EN
011A 00              395                             NOP 
011B C285            396                             CLR EN
011D 22              397                             RET
                     398     
011E 12012D          399     DISPLAY:        LCALL READY
0121 C286            400                             CLR RW
0123 D287            401                             SETB RS
0125 F5A0            402                             MOV P2,A
0127 D285            403                             SETB EN
0129 00              404                             NOP
012A C285            405                             CLR EN
012C 22              406                             RET
                     407     
012D D2A7            408     READY:          SETB P2.7
012F C287            409                             CLR RS
0131 D286            410                             SETB RW
0133 C285            411     BUSY:           CLR EN
0135 D285            412                             SETB EN
0137 20A7F9          413                             JB P2.7,BUSY
013A 00              414                             NOP
013B C285            415                             CLR EN
013D 22              416                             RET
                     417     
013E 7401            418     CLEARH:         MOV A,#01H                                              ;CLEAR DISPLAY AND 
                             HOME CURSOR
0140 12010F          419                             LCALL COMMAND
0143 22              420                             RET
                     421     
0144 7414            422     RSHIFTC:        MOV A,#14H                                              ;SHIFT CURSOR RIGHT
                              BY COUNT IN B
0146 12010F          423     SHRIGHT:        LCALL COMMAND
0149 D5F0FA          424                             DJNZ B,SHRIGHT
014C 22              425                             RET
                     426                             
014D E4              427     WRITEALL:       CLR A                                                   ;WRITE ALL POINTED 
                             BY DPTR
014E 93              428                             MOVC A,@A+DPTR
014F 6006            429                             JZ EXITWR
0151 A3              430                             INC DPTR
0152 12011E          431                             LCALL DISPLAY
0155 80F6            432                             SJMP WRITEALL
0157 00              433     EXITWR:         NOP
0158 22              434                             RET
                     435     
                     436     
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE     8

0159 7401            437     LCDWRITE:       MOV A,#01H
015B 12010F          438                             LCALL COMMAND                                   ;UPDATE LCD UPPER L
                             INE
015E 7A10            439                             MOV R2,#10H
0160 E4              440     DISPU:          CLR A
0161 93              441                             MOVC A,@A+DPTR
0162 12011E          442                             LCALL DISPLAY
0165 A3              443                             INC DPTR
0166 DAF8            444                             DJNZ R2,DISPU
0168 74C0            445     LCDWRITEL:      MOV A,#0C0H                                             ;UPDATE LCD LOWER L
                             INE
016A 12010F          446                             LCALL COMMAND
016D 7A10            447                             MOV R2,#10H
016F E4              448     DISPL:          CLR A
0170 93              449                             MOVC A,@A+DPTR
0171 12011E          450                             LCALL DISPLAY
0174 A3              451                             INC DPTR
0175 DAF8            452                             DJNZ R2,DISPL
0177 22              453                             RET
                     454     ;------------------------------------------------------------------------------------------
                             -
                     455     ;INTERRUPT SERVICE ROUTINES
                     456     
                     457     ;SERIAL INTERRUPT : SERIAL
                     458     ;SERIAL RECEPTION OR TRANSMISSION COMPLETE
0023                 459     ORG 0023H
0023 021000          460                             LJMP 1000H
1000                 461     ORG 1000H
                     462     
1000 C2CA            463     SERCON:         CLR TR2
1002 C0E0            464                             PUSH ACC
1004 D2D3            465                             SETB PSW.3
1006 309814          466                             JNB RI,TXI
1009 C298            467                             CLR RI
100B E599            468                             MOV A,SBUF
100D B45A04          469                             CJNE A,#'Z',PWRSAFE                     ;CHECK IF POWER DOWN IS ISS
                             UED
1010 D279            470                             SETB 79H                                        ;SET 79H IF POWERDO
                             WN IS NEEDED
1012 800B            471                             SJMP EXITC
1014 B85002          472     PWRSAFE:        CJNE R0,#50H,CONTC
1017 7840            473                             MOV R0,#40H
1019 F6              474     CONTC:          MOV @R0,A
101A 08              475                             INC R0
101B 8002            476                             SJMP EXITC
101D C299            477     TXI:            CLR TI
101F D0E0            478     EXITC:          POP ACC
1021 D2CA            479                             SETB TR2
1023 C2D3            480                             CLR PSW.3
1025 32              481                             RETI 
                     482     ;------------------------------------------------------------------------------------------
                             -
                     483     ;OTHER SUBROUTINES
                     484     
                     485     ;DELAY DISPLAY & SYNC
1026 7F06            486     DELAYD:         MOV R7,#06H
1028 7EFF            487                             MOV R6,#0FFH
102A 7DFF            488                             MOV R5,#0FFH
102C DDFE            489                             DJNZ R5,$
102E DEFC            490                             DJNZ R6,$-2
1030 DFFA            491                             DJNZ R7,$-4
1032 22              492                             RET
                     493     
                     494     ;DELAY LCD DISPLAY
1033 7F06            495     DELAYL:         MOV R7,#06H
1035 7EFF            496                             MOV R6,#0FFH
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE     9

1037 7DFF            497                             MOV R5,#0FFH
1039 DDFE            498                             DJNZ R5,$
103B DEFC            499                             DJNZ R6,$-2
103D DFFA            500                             DJNZ R7,$-4
103F 22              501                             RET
                     502     
                     503     ;DELAY DISPLAY
1040 7FFF            504     DELAYF:         MOV R7,#0FFH
1042 DFFE            505                             DJNZ R7,$
1044 22              506                             RET
                     507     
                     508                             
                     509     ;HEX TO ASCII CONVERTER
1045 75F064          510     CONVERT:        MOV B,#100
1048 84              511                             DIV AB
1049 4430            512                             ORL A,#30H
104B F563            513                             MOV 63H,A
104D E5F0            514                             MOV A,B
104F 75F00A          515                             MOV B,#10
1052 84              516                             DIV AB
1053 4430            517                             ORL A,#30H
1055 F564            518                             MOV 64H,A
1057 E5F0            519                             MOV A,B
1059 4430            520                             ORL A,#30H
105B F565            521                             MOV 65H,A
105D 22              522                             RET
                     523     
                     524      
                     525     ;------------------------------------------------------------------------------------------
                             -
                     526     ;DISPLAY DATA
                     527     
1A00                 528     ORG 1A00H
                     529     
1A00 494E4954        530     MSG1:   DB 'INITIALIZING',00H,00H,00H,00H,00H
1A04 49414C49                
1A08 5A494E47                
1A0C 00000000                
1A10 00                      
1A11 2F2F2F2F        531     MSG2:   DB '////////////////////////////////',00H,00H
1A15 2F2F2F2F                
1A19 2F2F2F2F                
1A1D 2F2F2F2F                
1A21 2F2F2F2F                
1A25 2F2F2F2F                
1A29 2F2F2F2F                
1A2D 2F2F2F2F                
1A31 0000                    
1A33 3030204D        532     MSG3:   DB '00 MICRO 0 BUSY ',00H
1A37 4943524F                
1A3B 20302042                
1A3F 55535920                
1A43 00                      
1A44 52584420        533     MSG4:   DB 'RXD CH0-1 IDLE  MICRO B IDLE    ',00H
1A48 4348302D                
1A4C 31204944                
1A50 4C452020                
1A54 4D494352                
1A58 4F204220                
1A5C 49444C45                
1A60 20202020                
1A64 00                      
1A65 434C4F53        534     MSG5:   DB 'CLOSING CLASPER 61 MICRO B BUSY ',00H       ;61H RIGHT      'a'
1A69 494E4720                
1A6D 434C4153                
1A71 50455220                
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE    10

1A75 3631204D                
1A79 4943524F                
1A7D 20422042                
1A81 55535920                
1A85 00                      
1A86 4F50454E        535     MSG6:   DB 'OPENING CLASPER 62 MICRO B BUSY ',00H       ;62H RIGHT      'b'
1A8A 494E4720                
1A8E 434C4153                
1A92 50455220                
1A96 3632204D                
1A9A 4943524F                
1A9E 20422042                
1AA2 55535920                
1AA6 00                      
1AA7 52495445        536     MSG7:   DB 'RITE SHOULDER UP63 MICRO B BUSY ',00H       ;63H            'c'
1AAB 2053484F                
1AAF 554C4445                
1AB3 52205550                
1AB7 3633204D                
1ABB 4943524F                
1ABF 20422042                
1AC3 55535920                
1AC7 00                      
1AC8 4C454654        537     MSG8:   DB 'LEFT SHOULDER UP64 MICRO B BUSY ',00H       ;64H            'd'
1ACC 2053484F                
1AD0 554C4445                
1AD4 52205550                
1AD8 3634204D                
1ADC 4943524F                
1AE0 20422042                
1AE4 55535920                
1AE8 00                      
1AE9 52475420        538     MSG9:   DB 'RGT SHOULDER DWN65 MICRO B BUSY ',00H       ;65H            'e'
1AED 53484F55                
1AF1 4C444552                
1AF5 2044574E                
1AF9 3635204D                
1AFD 4943524F                
1B01 20422042                
1B05 55535920                
1B09 00                      
1B0A 4C465420        539     MSG10:  DB 'LFT SHOULDER DWN66 MICRO B BUSY ',00H       ;66H            'f'
1B0E 53484F55                
1B12 4C444552                
1B16 2044574E                
1B1A 3636204D                
1B1E 4943524F                
1B22 20422042                
1B26 55535920                
1B2A 00                      
1B2B 52494748        540     MSG11:  DB 'RIGHT FOREARM UP67 MICRO B BUSY ',00H       ;67H            'g'
1B2F 5420464F                
1B33 52454152                
1B37 4D205550                
1B3B 3637204D                
1B3F 4943524F                
1B43 20422042                
1B47 55535920                
1B4B 00                      
1B4C 4C454654        541     MSG12:  DB 'LEFT FOREARM UP 68 MICRO B BUSY ',00H       ;68H            'h'
1B50 20464F52                
1B54 4541524D                
1B58 20555020                
1B5C 3638204D                
1B60 4943524F                
1B64 20422042                
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE    11

1B68 55535920                
1B6C 00                      
1B6D 52475420        542     MSG13:  DB 'RGT FOREARM DOWN69 MICRO B BUSY ',00H       ;69H            'i'
1B71 464F5245                
1B75 41524D20                
1B79 444F574E                
1B7D 3639204D                
1B81 4943524F                
1B85 20422042                
1B89 55535920                
1B8D 00                      
1B8E 4C465420        543     MSG14:  DB 'LFT FOREARM DOWN6A MICRO B BUSY ',00H       ;6AH            'j'
1B92 464F5245                
1B96 41524D20                
1B9A 444F574E                
1B9E 3641204D                
1BA2 4943524F                
1BA6 20422042                
1BAA 55535920                
1BAE 00                      
1BAF 4D4F5649        544     MSG15:  DB 'MOVING FORWARD  6B MICRO B BUSY ',00H       ;6BH            'k'
1BB3 4E472046                
1BB7 4F525741                
1BBB 52442020                
1BBF 3642204D                
1BC3 4943524F                
1BC7 20422042                
1BCB 55535920                
1BCF 00                      
1BD0 4D4F5649        545     MSG16:  DB 'MOVING BACKWARD 6C MICRO B BUSY ',00H       ;6CH            'l'
1BD4 4E472042                
1BD8 41434B57                
1BDC 41524420                
1BE0 3643204D                
1BE4 4943524F                
1BE8 20422042                
1BEC 55535920                
1BF0 00                      
1BF1 5455524E        546     MSG17:  DB 'TURNING RIGHT   6D MICRO B BUSY ',00H       ;6DH            'm'
1BF5 494E4720                
1BF9 52494748                
1BFD 54202020                
1C01 3644204D                
1C05 4943524F                
1C09 20422042                
1C0D 55535920                
1C11 00                      
1C12 5455524E        547     MSG18:  DB 'TURNING LEFT    6E MICRO B BUSY ',00H       ;6EH            'n'
1C16 494E4720                
1C1A 4C454654                
1C1E 20202020                
1C22 3645204D                
1C26 4943524F                
1C2A 20422042                
1C2E 55535920                
1C32 00                      
1C33 434C4F53        548     MSG19:  DB 'CLOSING CLASPER 6F MICRO B BUSY ',00H       ;6FH LEFT       'o'
1C37 494E4720                
1C3B 434C4153                
1C3F 50455220                
1C43 3646204D                
1C47 4943524F                
1C4B 20422042                
1C4F 55535920                
1C53 00                      
1C54 4F50454E        549     MSG20:  DB 'OPENING CLASPER 70 MICRO B BUSY ',00H       ;70H LEFT       'p'
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE    12

1C58 494E4720                
1C5C 434C4153                
1C60 50455220                
1C64 3730204D                
1C68 4943524F                
1C6C 20422042                
1C70 55535920                
1C74 00                      
1C75 53544F50        550     MSG21:  DB 'STOPPING        71 MICRO B BUSY ',00H       ;71H            'q'
1C79 50494E47                
1C7D 20202020                
1C81 20202020                
1C85 3731204D                
1C89 4943524F                
1C8D 20422042                
1C91 55535920                
1C95 00                      
1C96 52475420        551     MSG22:  DB 'RGT SHOULDER STP72 MICRO B BUSY ',00H       ;72H RIGHT SHOULDER STOP        'r'
1C9A 53484F55                
1C9E 4C444552                
1CA2 20535450                
1CA6 3732204D                
1CAA 4943524F                
1CAE 20422042                
1CB2 55535920                
1CB6 00                      
1CB7 4C465420        552     MSG23:  DB 'LFT SHOULDER STP73 MICRO B BUSY ',00H       ;73H LEFT SHOULDER STOP         's'
1CBB 53484F55                
1CBF 4C444552                
1CC3 20535450                
1CC7 3733204D                
1CCB 4943524F                
1CCF 20422042                
1CD3 55535920                
1CD7 00                      
1CD8 52475420        553     MSG24:  DB 'RGT FOREARM STOP74 MICRO B BUSY ',00H       ;74H RIGHT FOREARM STOP         't'
1CDC 464F5245                
1CE0 41524D20                
1CE4 53544F50                
1CE8 3734204D                
1CEC 4943524F                
1CF0 20422042                
1CF4 55535920                
1CF8 00                      
1CF9 4C465420        554     MSG25:  DB 'LFT FOREARM STOP75 MICRO B BUSY ',00H       ;75H LEFT FOREARM STOP          'u'
1CFD 464F5245                
1D01 41524D20                
1D05 53544F50                
1D09 3735204D                
1D0D 4943524F                
1D11 20422042                
1D15 55535920                
1D19 00                      
1D1A 5455524E        555     MSG26:  DB 'TURNING HEAD RGT76 MICRO B BUSY ',00H       ;76H TURN HEAD RIGHT            'v'
1D1E 494E4720                
1D22 48454144                
1D26 20524754                
1D2A 3736204D                
1D2E 4943524F                
1D32 20422042                
1D36 55535920                
1D3A 00                      
1D3B 5455524E        556     MSG27:  DB 'TURNING HEAD LFT77 MICRO B BUSY ',00H       ;77H TURN HEAD LEFT                
                                  'w'
1D3F 494E4720                
1D43 48454144                
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE    13

1D47 204C4654                
1D4B 3737204D                
1D4F 4943524F                
1D53 20422042                
1D57 55535920                
1D5B 00                      
1D5C 48414C54        557     MSG28:  DB 'HALTING HEAD    78 MICRO B BUSY ',00H       ;78H STOP HEAD MOTION           'x'
1D60 494E4720                
1D64 48454144                
1D68 20202020                
1D6C 3738204D                
1D70 4943524F                
1D74 20422042                
1D78 55535920                
1D7C 00                      
1D7D 52454348        558     MSG29:  DB 'RECHARGE & RESET',00H
1D81 41524745                
1D85 20262052                
1D89 45534554                
1D8D 00                      
                     559     ;------------------------------------------------------------------------------------------
                             - 
                     560     ;------------------------------------------------------------------------------------------
                             -
                     561     END
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE    14

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

AC . . . . . . . .  B ADDR   00D0H.6 A   
ACC. . . . . . . .  D ADDR   00E0H   A   
B. . . . . . . . .  D ADDR   00F0H   A   
BUSY . . . . . . .  C ADDR   0133H   A   
CHBUSY . . . . . .  C ADDR   00F6H   A   
CLE. . . . . . . .  C ADDR   0067H   A   
CLEARH . . . . . .  C ADDR   013EH   A   
COMLOAD. . . . . .  C ADDR   0094H   A   
COMMAND. . . . . .  C ADDR   010FH   A   
CONTC. . . . . . .  C ADDR   1019H   A   
CONTI. . . . . . .  C ADDR   00CDH   A   
CONVERT. . . . . .  C ADDR   1045H   A   
CP_RL2 . . . . . .  B ADDR   00C8H.0 A   
CY . . . . . . . .  B ADDR   00D0H.7 A   
C_T2 . . . . . . .  B ADDR   00C8H.1 A   
DELAYD . . . . . .  C ADDR   1026H   A   
DELAYF . . . . . .  C ADDR   1040H   A   
DELAYL . . . . . .  C ADDR   1033H   A   
DISPL. . . . . . .  C ADDR   016FH   A   
DISPLAY. . . . . .  C ADDR   011EH   A   
DISPU. . . . . . .  C ADDR   0160H   A   
DPH. . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . .  D ADDR   0082H   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
EN . . . . . . . .  B ADDR   0080H.5 A   
ES . . . . . . . .  B ADDR   00A8H.4 A   
ET0. . . . . . . .  B ADDR   00A8H.1 A   
ET1. . . . . . . .  B ADDR   00A8H.3 A   
ET2. . . . . . . .  B ADDR   00A8H.5 A   
EX0. . . . . . . .  B ADDR   00A8H.0 A   
EX1. . . . . . . .  B ADDR   00A8H.2 A   
EXEN2. . . . . . .  B ADDR   00C8H.3 A   
EXF2 . . . . . . .  B ADDR   00C8H.6 A   
EXITC. . . . . . .  C ADDR   101FH   A   
EXITF. . . . . . .  C ADDR   00F9H   A   
EXITWR . . . . . .  C ADDR   0157H   A   
F0 . . . . . . . .  B ADDR   00D0H.5 A   
F1 . . . . . . . .  B ADDR   00D0H.1 A   
HALTDC . . . . . .  C ADDR   010DH   A   
IE . . . . . . . .  D ADDR   00A8H   A   
IE0. . . . . . . .  B ADDR   0088H.1 A   
IE1. . . . . . . .  B ADDR   0088H.3 A   
INIT . . . . . . .  C ADDR   0034H   A   
INT0 . . . . . . .  B ADDR   00B0H.2 A   
INT1 . . . . . . .  B ADDR   00B0H.3 A   
IP . . . . . . . .  D ADDR   00B8H   A   
IT0. . . . . . . .  B ADDR   0088H.0 A   
IT1. . . . . . . .  B ADDR   0088H.2 A   
LCDWRITE . . . . .  C ADDR   0159H   A   
LCDWRITEL. . . . .  C ADDR   0168H   A   
MAIN . . . . . . .  C ADDR   00B7H   A   
MAIN_END . . . . .  C ADDR   00FAH   A   
MSG1 . . . . . . .  C ADDR   1A00H   A   
MSG10. . . . . . .  C ADDR   1B0AH   A   
MSG11. . . . . . .  C ADDR   1B2BH   A   
MSG12. . . . . . .  C ADDR   1B4CH   A   
MSG13. . . . . . .  C ADDR   1B6DH   A   
MSG14. . . . . . .  C ADDR   1B8EH   A   
MSG15. . . . . . .  C ADDR   1BAFH   A   
MSG16. . . . . . .  C ADDR   1BD0H   A   
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE    15

MSG17. . . . . . .  C ADDR   1BF1H   A   
MSG18. . . . . . .  C ADDR   1C12H   A   
MSG19. . . . . . .  C ADDR   1C33H   A   
MSG2 . . . . . . .  C ADDR   1A11H   A   
MSG20. . . . . . .  C ADDR   1C54H   A   
MSG21. . . . . . .  C ADDR   1C75H   A   
MSG22. . . . . . .  C ADDR   1C96H   A   
MSG23. . . . . . .  C ADDR   1CB7H   A   
MSG24. . . . . . .  C ADDR   1CD8H   A   
MSG25. . . . . . .  C ADDR   1CF9H   A   
MSG26. . . . . . .  C ADDR   1D1AH   A   
MSG27. . . . . . .  C ADDR   1D3BH   A   
MSG28. . . . . . .  C ADDR   1D5CH   A   
MSG29. . . . . . .  C ADDR   1D7DH   A   
MSG3 . . . . . . .  C ADDR   1A33H   A   
MSG4 . . . . . . .  C ADDR   1A44H   A   
MSG5 . . . . . . .  C ADDR   1A65H   A   
MSG6 . . . . . . .  C ADDR   1A86H   A   
MSG7 . . . . . . .  C ADDR   1AA7H   A   
MSG8 . . . . . . .  C ADDR   1AC8H   A   
MSG9 . . . . . . .  C ADDR   1AE9H   A   
NEXTS. . . . . . .  C ADDR   00C3H   A   
OV . . . . . . . .  B ADDR   00D0H.2 A   
P. . . . . . . . .  B ADDR   00D0H.0 A   
P0 . . . . . . . .  D ADDR   0080H   A   
P0_0 . . . . . . .  B ADDR   0080H.0 A   
P0_1 . . . . . . .  B ADDR   0080H.1 A   
P0_2 . . . . . . .  B ADDR   0080H.2 A   
P0_3 . . . . . . .  B ADDR   0080H.3 A   
P0_4 . . . . . . .  B ADDR   0080H.4 A   
P0_5 . . . . . . .  B ADDR   0080H.5 A   
P0_6 . . . . . . .  B ADDR   0080H.6 A   
P0_7 . . . . . . .  B ADDR   0080H.7 A   
P1 . . . . . . . .  D ADDR   0090H   A   
P1_0 . . . . . . .  B ADDR   0090H.0 A   
P1_1 . . . . . . .  B ADDR   0090H.1 A   
P1_2 . . . . . . .  B ADDR   0090H.2 A   
P1_3 . . . . . . .  B ADDR   0090H.3 A   
P1_4 . . . . . . .  B ADDR   0090H.4 A   
P1_5 . . . . . . .  B ADDR   0090H.5 A   
P1_6 . . . . . . .  B ADDR   0090H.6 A   
P1_7 . . . . . . .  B ADDR   0090H.7 A   
P2 . . . . . . . .  D ADDR   00A0H   A   
P2_0 . . . . . . .  B ADDR   00A0H.0 A   
P2_1 . . . . . . .  B ADDR   00A0H.1 A   
P2_2 . . . . . . .  B ADDR   00A0H.2 A   
P2_3 . . . . . . .  B ADDR   00A0H.3 A   
P2_4 . . . . . . .  B ADDR   00A0H.4 A   
P2_5 . . . . . . .  B ADDR   00A0H.5 A   
P2_6 . . . . . . .  B ADDR   00A0H.6 A   
P2_7 . . . . . . .  B ADDR   00A0H.7 A   
P3 . . . . . . . .  D ADDR   00B0H   A   
P3_0 . . . . . . .  B ADDR   00B0H.0 A   
P3_1 . . . . . . .  B ADDR   00B0H.1 A   
P3_2 . . . . . . .  B ADDR   00B0H.2 A   
P3_3 . . . . . . .  B ADDR   00B0H.3 A   
P3_4 . . . . . . .  B ADDR   00B0H.4 A   
P3_5 . . . . . . .  B ADDR   00B0H.5 A   
P3_6 . . . . . . .  B ADDR   00B0H.6 A   
P3_7 . . . . . . .  B ADDR   00B0H.7 A   
PCON . . . . . . .  D ADDR   0087H   A   
POWERDWN . . . . .  C ADDR   00FDH   A   
PS . . . . . . . .  B ADDR   00B8H.4 A   
PSW. . . . . . . .  D ADDR   00D0H   A   
PT0. . . . . . . .  B ADDR   00B8H.1 A   
PT1. . . . . . . .  B ADDR   00B8H.3 A   
A51 MACRO ASSEMBLER  COMPC                                                                06/21/2009 22:14:18 PAGE    16

PT2. . . . . . . .  B ADDR   00B8H.5 A   
PWRSAFE. . . . . .  C ADDR   1014H   A   
PX0. . . . . . . .  B ADDR   00B8H.0 A   
PX1. . . . . . . .  B ADDR   00B8H.2 A   
RB8. . . . . . . .  B ADDR   0098H.2 A   
RCAP2H . . . . . .  D ADDR   00CBH   A   
RCAP2L . . . . . .  D ADDR   00CAH   A   
RCLK . . . . . . .  B ADDR   00C8H.5 A   
RD . . . . . . . .  B ADDR   00B0H.7 A   
READY. . . . . . .  C ADDR   012DH   A   
REN. . . . . . . .  B ADDR   0098H.4 A   
RESET. . . . . . .  C ADDR   0000H   A   
RI . . . . . . . .  B ADDR   0098H.0 A   
RPTA . . . . . . .  C ADDR   0098H   A   
RS . . . . . . . .  B ADDR   0080H.7 A   
RS0. . . . . . . .  B ADDR   00D0H.3 A   
RS1. . . . . . . .  B ADDR   00D0H.4 A   
RSHIFTC. . . . . .  C ADDR   0144H   A   
RW . . . . . . . .  B ADDR   0080H.6 A   
RXD. . . . . . . .  B ADDR   00B0H.0 A   
SBUF . . . . . . .  D ADDR   0099H   A   
SCON . . . . . . .  D ADDR   0098H   A   
SERCON . . . . . .  C ADDR   1000H   A   
SHRIGHT. . . . . .  C ADDR   0146H   A   
SM0. . . . . . . .  B ADDR   0098H.7 A   
SM1. . . . . . . .  B ADDR   0098H.6 A   
SM2. . . . . . . .  B ADDR   0098H.5 A   
SP . . . . . . . .  D ADDR   0081H   A   
START. . . . . . .  C ADDR   0030H   A   
SYSBUSY. . . . . .  B ADDR   0090H.7 A   
T0 . . . . . . . .  B ADDR   00B0H.4 A   
T1 . . . . . . . .  B ADDR   00B0H.5 A   
T2 . . . . . . . .  B ADDR   0090H.0 A   
T2CON. . . . . . .  D ADDR   00C8H   A   
T2EX . . . . . . .  B ADDR   0090H.1 A   
T2MOD. . . . . . .  D ADDR   00C9H   A   
TB8. . . . . . . .  B ADDR   0098H.3 A   
TCLK . . . . . . .  B ADDR   00C8H.4 A   
TCON . . . . . . .  D ADDR   0088H   A   
TF0. . . . . . . .  B ADDR   0088H.5 A   
TF1. . . . . . . .  B ADDR   0088H.7 A   
TF2. . . . . . . .  B ADDR   00C8H.7 A   
TH0. . . . . . . .  D ADDR   008CH   A   
TH1. . . . . . . .  D ADDR   008DH   A   
TH2. . . . . . . .  D ADDR   00CDH   A   
TI . . . . . . . .  B ADDR   0098H.1 A   
TL0. . . . . . . .  D ADDR   008AH   A   
TL1. . . . . . . .  D ADDR   008BH   A   
TL2. . . . . . . .  D ADDR   00CCH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . .  B ADDR   0088H.6 A   
TR2. . . . . . . .  B ADDR   00C8H.2 A   
TXD. . . . . . . .  B ADDR   00B0H.1 A   
TXI. . . . . . . .  C ADDR   101DH   A   
VERFLL . . . . . .  C ADDR   00D4H   A   
VERFLU . . . . . .  C ADDR   00D9H   A   
WR . . . . . . . .  B ADDR   00B0H.6 A   
WRITEALL . . . . .  C ADDR   014DH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
