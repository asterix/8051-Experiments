$NOMOD51
$INCLUDE (AT89X52.h)

ORG 0000H
SJMP 0030H




ORG 0030H




START:	MOV TCON,#01H
		MOV IE,#91H				  	;INTERRUPTS ENABLE : INT0, SERIAL
		MOV IP,#10H	


		MOV P1,#00H
		MOV P3,#0FFH
		MOV P2,#00H

		MOV A,#08H	; SINGLE ENDED CHANNEL 1  :: 0000 1000
	
		ACALL WRITE	; START CONVERSION
	
	

HERE:	MOV P2,60H
		SJMP HERE 
	



WRITE:	MOV P1,A	
		SETB RD
		SETB WR	; SET WR BAR
		NOP
		CLR WR	; CLEAR WR BAR
		NOP
		NOP
		NOP
		SETB WR	; RISING EDGE ON WR BAR
		RET



READ:		SETB WR
		CLR RD	; RD BAR LOW
		NOP
		NOP
		MOV P1,#0FFH	;CONFIGURE PORT FOR INPUT::: DONT FORGET THIS
		MOV A,P1
		NOP
		NOP
		RET				
		



ORG 0003H
LJMP 1200H
ORG 1200H
INTRR:	NOP
		NOP
		NOP
		NOP
		LCALL READ
		MOV 60H,A
		MOV A,#08H
		LCALL WRITE
		RETI


END

