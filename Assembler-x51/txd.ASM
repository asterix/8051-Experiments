;89c52 serial comm.
;24/10/2008
;ASTER

$NOMOD51
$INCLUDE (89C52.MCU)


ORG 0000H
SJMP 0030H

ORG 0030H




START:		MOV SCON,#40H
		ANL PCON,#7FH
		
		MOV IE,#90H
		MOV IP,#10H

		MOV T2CON,#30H
		MOV RCAP2H,#0FFH	;9600 bps
		MOV RCAP2L,#0D9H	;12MHz
		
		SETB TR2
		

		MOV A,#01H	
		ACALL XMIT
		MOV A,#06H
		ACALL XMIT
		MOV A,#80H
		ACALL XMIT

		MOV A,#02H
		ACALL XMIT
		MOV A,#0AH
		ACALL XMIT
		MOV A,#40H
		ACALL XMIT

HERE:		SJMP HERE



XMIT:		MOV SBUF,A 
		NOP
		
DONE:		RET


ORG 0023H

LJMP 0900H

ORG 0900H
		
SER_INT:	NOP
		CLR TI
		NOP
		;LCALL XMIT
		RETI

END