$NOMOD51
$INCLUDE (89C52.MCU)




ORG 0000H
SJMP 0030H
		

ORG 0030H
	


START:		CLR A 
		MOV P1,A
		MOV P2,A
		MOV P3,A
		SETB P3.0
		MOV R1,A


STARTS:		MOV SCON,#50H
		ANL PCON,#7FH
		
		MOV IE,#90H
		MOV IP,#10H
		
		MOV T2CON,#30H
		MOV RCAP2H,#0FFH	;9600 bps
		MOV RCAP2L,#0DCH
		
		SETB TR2
		CLR 55H
		

		
HERE:		MOV P2,R5
		SJMP HERE



ORG 0023H
LJMP 1000H
ORG 1000H

RXDC:		NOP
		JNB RI,EXIT
		CLR RI
		MOV A,SBUF
		CJNE A,#40H,PRO
		CLR 55H
		SJMP EXIT
PRO:		JB 55H,SKIP
		CJNE A,#02H,EXIT
		SETB 55H
		SJMP EXIT
SKIP:		MOV R5,A

EXIT:		RETI


END